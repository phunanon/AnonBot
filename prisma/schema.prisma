// select (X & (Y >> 4)) and (Y & (X >> 4));
// default 0b11110001 241
// M for F 0b01000010 66
// F for M 0b00100100 36
// F for ? 0b11110100 244
// F for F 0b01000100 68

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            Int       @id @default(autoincrement())
  timestamp     DateTime  @default(now())
  //Discord info
  snowflake     BigInt    @unique
  tag           String
  //Gender
  genderFlags   Int       @default(241) //?, M, F, other, seeking ?, seeking M, seeking F, seeking other
  genderChanged DateTime?
  //Reachability
  accessible    Boolean   @default(true)
  lastSeen      DateTime  @default(now())
  //Finding conversation
  seekingSince  DateTime?
  greeting      String?
  //In conversation
  convoWith     User?     @relation("convoWith", fields: [convoWithId], references: [id])
  convoWith_    User?     @relation("convoWith")
  convoWithId   Int?      @unique
  //Stats
  numMessage    Int       @default(0)
  numConvo      Int       @default(0)
  //Blocking
  blocker       Block[]   @relation("blocker")
  blocked       Block[]   @relation("blocked")
}

model Block {
  id        Int  @id @default(autoincrement())
  blocker   User @relation("blocker", fields: [blockerId], references: [id])
  blocked   User @relation("blocked", fields: [blockedId], references: [id])
  blockerId Int
  blockedId Int
}
